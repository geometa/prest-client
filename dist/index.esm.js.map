{"version":3,"file":"index.esm.js","sources":["../src/api/client.ts"],"sourcesContent":["import { stringify } from 'querystring';\n\n/**\n * Options for creating a Prest API client.\n *\n * @export\n * @interface PrestApiClientOptions\n */\nexport interface PrestApiClientOptions {\n  /**\n   * The base URL of the Prest API endpoint.\n   */\n  base_url: string;\n\n  /**\n   * The username for authentication with the Prest API.\n   */\n  user_name: string;\n\n  /**\n   * The password for authentication with the Prest API.\n   */\n  password: string;\n\n  /**\n   * The name of the database to connect to.\n   */\n  database: string;\n}\n\nclass ChainedQuery {\n  private client: PrestApiClient;\n  private baseUrl: string;\n  private reqType: 'get' | 'post' | 'put' | 'delete';\n  private body: any;\n  private chainedOperations: string[];\n\n  constructor(\n    client: PrestApiClient,\n    baseUrl: string,\n    reqType: 'get' | 'post' | 'put' | 'delete',\n    body: any,\n  ) {\n    this.client = client;\n    this.baseUrl = baseUrl;\n    this.reqType = reqType;\n    this.body = body;\n    this.chainedOperations = [];\n  }\n\n  Page(pageNumber: number): ChainedQuery {\n    this.chainedOperations.push(stringify({ _page: pageNumber }));\n    return this;\n  }\n\n  PageSize(pageSize: number): ChainedQuery {\n    this.chainedOperations.push(stringify({ _page_size: pageSize }));\n    return this;\n  }\n\n  Select(...fields: string[]): ChainedQuery {\n    this.chainedOperations.push(stringify({ _select: fields.join(',') }));\n    return this;\n  }\n\n  Count(field?: string): ChainedQuery {\n    const fieldValue = field ? field : '*';\n    this.chainedOperations.push(stringify({ _count: fieldValue }));\n    return this;\n  }\n\n  CountFirst(countFirst: boolean = true): ChainedQuery {\n    this.chainedOperations.push(stringify({ _count_first: countFirst }));\n    return this;\n  }\n\n  Distinct(distinct: boolean = true): ChainedQuery {\n    this.chainedOperations.push(stringify({ _distinct: distinct }));\n    return this;\n  }\n\n  Order(...fields: string[]): ChainedQuery {\n    const orderFields = fields.map((field) =>\n      field.startsWith('-') ? field : `+${field}`,\n    );\n    this.chainedOperations.push(stringify({ _order: orderFields.join(',') }));\n    return this;\n  }\n\n  GroupBy(...fields: string[]): ChainedQuery {\n    this.chainedOperations.push(stringify({ _groupby: fields.join(',') }));\n    return this;\n  }\n\n  FilterEqual(field: string, value: any): ChainedQuery {\n    this.chainedOperations.push(`${field}=${encodeURIComponent(value)}`);\n    return this;\n  }\n\n  /**\n   * Executes the chained query operations and returns the result.\n   *\n   * @returns A promise that resolves with the query result.\n   */\n  async execute(): Promise<any> {\n    let chainedUrl = this.baseUrl;\n\n    if (this.chainedOperations.length > 0) {\n      chainedUrl += `?${this.chainedOperations[0]}`;\n\n      for (let i = 1; i < this.chainedOperations.length; i++) {\n        chainedUrl += `&${this.chainedOperations[i]}`;\n      }\n    }\n\n    try {\n      const httpClientMethod = this.client.getHttpClientMethod(this.reqType);\n      const response = await httpClientMethod(chainedUrl, this.body);\n\n      return response.json();\n    } catch (error: any) {\n      throw new Error(`Failed to make API request: ${error.message}`);\n    }\n  }\n}\n\n/**\n * A client for interacting with a Prest API.\n *\n * @export\n * @class PrestApiClient\n */\nexport class PrestApiClient {\n  /**\n   * The underlying HTTP client for making requests to the Prest API.\n   */\n  private client:\n    | undefined\n    | {\n        get: (url: string) => Promise<Response>;\n        post: (url: string, body: any) => Promise<Response>;\n        put: (url: string, body: any) => Promise<Response>;\n        delete: (url: string) => Promise<Response>;\n      };\n\n  /**\n   * The options used to configure the client.\n   */\n  private options: PrestApiClientOptions;\n\n  /**\n   * Creates a new Prest API client with the provided options.\n   *\n   * @param options - The options for creating the client.\n   */\n  constructor(options: PrestApiClientOptions) {\n    this.options = options;\n    this.createClient();\n  }\n\n  /**\n   * Creates the underlying HTTP client with the necessary authentication headers.\n   */\n  private async createClient() {\n    try {\n      const username = this.options.user_name;\n      const password = this.options.password;\n      const authHeader = 'Basic ' + btoa(username + ':' + password);\n\n      this.client = {\n        get: async (url: string) => {\n          const response = await fetch(url, {\n            headers: {\n              Authorization: authHeader,\n            },\n          });\n\n          if (!response.ok) {\n            throw new Error(`Failed to fetch data: ${response.statusText}`);\n          }\n\n          return response;\n        },\n        post: async (url: string, body: any) => {\n          const response = await fetch(url, {\n            method: 'POST',\n            headers: {\n              'Content-Type': 'application/json',\n              'Authorization': authHeader,\n            },\n            body: JSON.stringify(body),\n          });\n\n          if (!response.ok) {\n            throw new Error(`Failed to insert data: ${response.statusText}`);\n          }\n\n          return response;\n        },\n        put: async (url: string, body: any) => {\n          const response = await fetch(url, {\n            method: 'PUT',\n            headers: {\n              'Content-Type': 'application/json',\n              'Authorization': authHeader,\n            },\n            body: JSON.stringify(body),\n          });\n\n          if (!response.ok) {\n            throw new Error(`Failed to update data: ${response.statusText}`);\n          }\n\n          return response;\n        },\n        delete: async (url: string) => {\n          const response = await fetch(url, {\n            method: 'DELETE',\n            headers: {\n              Authorization: authHeader,\n            },\n          });\n\n          if (!response.ok) {\n            throw new Error(`Failed to delete data: ${response.statusText}`);\n          }\n\n          return response;\n        },\n      };\n    } catch (error) {\n      console.error('Error creating client:', error);\n    }\n  }\n\n  /**\n   * Returns the appropriate HTTP client method for making the API request.\n   *\n   * @param method - The HTTP method to use ('get', 'post', 'put', or 'delete').\n   * @returns The corresponding HTTP client method.\n   * @throws An error if the client is not initialized or the method is invalid.\n   */\n  getHttpClientMethod(method: 'get' | 'post' | 'put' | 'delete') {\n    if (!this.client) {\n      throw new Error('Client not initialized');\n    }\n\n    switch (method) {\n      case 'get':\n        return this.client.get;\n      case 'post':\n        return this.client.post;\n      case 'put':\n        return this.client.put;\n      case 'delete':\n        return this.client.delete;\n      default:\n        throw new Error('Invalid HTTP method');\n    }\n  }\n\n  /**\n   * Returns an object for interacting with a specific table in the database.\n   *\n   * @param tableName - The name of the table.\n   * @returns An object with methods for interacting with the table.\n   */\n  Table(tableName: string | undefined): {\n    /**\n     * Retrieves the structure of the specified table.\n     *\n     * @returns A promise that resolves with the table structure.\n     * @throws An error if fetching the table structure fails.\n     *\n     * @example\n     * const response = await client.Table('user').List();\n     * // Queries the rows of the 'user' table. Public schema is used by default.\n     * // Executes GET `/:database/:schema/:table`.\n     *\n     * @example\n     * const response = await client.Table('private.user').List();\n     * // Retrieves the rows of the 'user' table in the 'private' schema.\n     * // Executes GET `/:database/:schema/:table`.\n     *\n     * @example\n     * const response = await client.Table('public.').List();\n     * // Retrieves a list of tables in the 'public' schema.\n     * // Executes GET `/:database/:schema`.\n     * // Note: The dot at the end is to ignore the table name.\n     */\n    List: () => ChainedQuery;\n\n    /**\n     * Retrieves data from the specified table.\n     *\n     * @returns A promise that resolves with the data from the table.\n     * @throws An error if fetching data from the table fails.\n     *\n     * @example\n     * const response = await client.Table('user').Show();\n     * // Retrieves data from the 'user' table.\n     * // Executes GET `/show/:database/:schema/:table`.\n     */\n    Show: () => ChainedQuery;\n\n    /**\n     * Inserts data into the specified table.\n     *\n     * @param data - The data to insert, structured as a JavaScript object with properties matching the table's columns.\n     * @returns A promise that resolves with the inserted data, including any generated IDs or timestamps.\n     * @throws An error if inserting data fails.\n     *\n     * @example\n     * const response = await client.Table('user').Insert({\n     *   user_name: 'Ronaldo',\n     *   description: 'Siuuu!!!',\n     *   picture: '\\\\x',\n     * });\n     * // Inserts a new row into the 'user' table.\n     * // Executes POST `/:database/:schema/:table`.\n     */\n    Insert: (data: any) => ChainedQuery;\n\n    /**\n     * Updates data in the specified table based on the provided field and value.\n     *\n     * @param field - The field to filter by for updating.\n     * @param value - The value of the field to filter by for updating.\n     * @param data - The data to update, structured as a JavaScript object with properties matching the table's columns.\n     * @returns A promise that resolves with the updated data.\n     * @throws An error if updating data fails.\n     *\n     * @example\n     * const response = await client.Table('user').Update(\n     *   'user_id', // Field to filter by\n     *   userIdToUpdate, // Value of the field to filter by\n     *   {\n     *     user_name: 'NewName',\n     *     description: 'Updated description',\n     *     picture: '\\\\x',\n     *   }\n     * );\n     * // Updates data in the 'user' table where 'user_id' equals 'userIdToUpdate'.\n     * // Executes PUT `/:database/:schema/:table?field=value`.\n     */\n    Update: (data: any) => ChainedQuery;\n\n    /**\n     * Deletes data from the specified table based on the provided field and value.\n     *\n     * @param field - The field to filter by for deletion.\n     * @param value - The value of the field to filter by for deletion.\n     * @returns A promise that resolves when the data is successfully deleted.\n     * @throws An error if deleting data fails.\n     *\n     * @example\n     * const response = await client.Table('user').Delete(\n     *   'user_id', // Field to filter by\n     *   userIdToDelete // Value of the field to filter by\n     * );\n     * // Deletes data from the 'user' table where 'user_id' equals 'userIdToDelete'.\n     * // Executes DELETE `/:database/:schema/:table?field=value`.\n     */\n    Delete: () => ChainedQuery;\n  } {\n    if (!this.client) {\n      throw new Error('Client not initialized');\n    }\n\n    if (!tableName) {\n      throw new Error('Table name is required');\n    }\n\n    let schemaName: string = 'public';\n    if (tableName.includes('.')) {\n      const parts = tableName.split('.');\n      schemaName = parts[0] || schemaName;\n      tableName = parts[1];\n    }\n\n    return {\n      List: (): ChainedQuery => {\n        const baseUrl = `${this.base_url}/${this.database}/${schemaName}/${tableName}`;\n        return new ChainedQuery(this, baseUrl, 'get', null);\n      },\n\n      Show: (): ChainedQuery => {\n        const baseUrl = `${this.base_url}/show/${this.database}/${schemaName}/${tableName}`;\n        return new ChainedQuery(this, baseUrl, 'get', null);\n      },\n      Insert: (data: any): ChainedQuery => {\n        const baseUrl = `${this.base_url}/${this.database}/${schemaName}/${tableName}`;\n        return new ChainedQuery(this, baseUrl, 'post', data);\n      },\n      Update: (data: any): ChainedQuery => {\n        const baseUrl = `${this.base_url}/${this.database}/${schemaName}/${tableName}`;\n        return new ChainedQuery(this, baseUrl, 'put', data);\n      },\n      Delete: (): ChainedQuery => {\n        const baseUrl = `${this.base_url}/${this.database}/${schemaName}/${tableName}`;\n        return new ChainedQuery(this, baseUrl, 'delete', null);\n      },\n    };\n  }\n\n  /**\n   * Gets the name of the database to which the client is connected.\n   */\n  get database(): string {\n    return this.options.database;\n  }\n\n  /**\n   * Gets the base URL of the Prest API endpoint to which the client is connected.\n   */\n  get base_url(): string {\n    return this.options.base_url;\n  }\n}\n"],"names":[],"mappings":"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"}